<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>新增主机信息 - Ant Design Vue</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/ant-design-vue/4.1.2/reset.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/ant-design-vue/4.1.2/antd.min.css" rel="stylesheet">
    <style>
        body {
            padding: 20px;
            background: #f0f2f5;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
        }
        #app {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }
        .demo-button {
            padding: 10px 20px;
        }
    </style>
</head>
<body>
    <div id="app">
        <a-button type="primary" @click="showModal" size="large">打开新增主机弹框</a-button>
        
        <a-modal
            v-model:open="visible"
            title="新增主机信息"
            width="800px"
            :footer="null"
            :destroy-on-close="true"
        >
            <a-form
                ref="formRef"
                :model="formState"
                :label-col="{ span: 6 }"
                :wrapper-col="{ span: 16 }"
            >
                <a-form-item label="主机名" name="hostname" required>
                    <a-input v-model:value="formState.hostname" placeholder="请输入主机名" />
                </a-form-item>

                <a-form-item label="IP" name="ip" required>
                    <a-input v-model:value="formState.ip" placeholder="请输入IP地址" />
                </a-form-item>

                <a-form-item label="应用资产名称" name="appAssetName" required>
                    <a-select
                        v-model:value="formState.appAssetName"
                        placeholder="请选择应用资产名称"
                        show-search
                        :filter-option="filterOption"
                    >
                        <a-select-option value="asset1">资产1</a-select-option>
                        <a-select-option value="asset2">资产2</a-select-option>
                        <a-select-option value="asset3">资产3</a-select-option>
                    </a-select>
                </a-form-item>

                <a-form-item label="品牌" name="brand" required>
                    <a-input v-model:value="formState.brand" placeholder="请输入品牌" />
                </a-form-item>

                <a-form-item label="规格型号" name="model" required>
                    <a-input v-model:value="formState.model" placeholder="请输入规格型号" />
                </a-form-item>

                <a-form-item label="运维负责人" name="opsPerson" required>
                    <a-select
                        v-model:value="formState.opsPerson"
                        mode="multiple"
                        placeholder="可多选"
                        :max-tag-count="2"
                    >
                        <a-select-option value="person1">张三</a-select-option>
                        <a-select-option value="person2">李四</a-select-option>
                        <a-select-option value="person3">王五</a-select-option>
                        <a-select-option value="person4">赵六</a-select-option>
                    </a-select>
                </a-form-item>

                <a-form-item label="类别名称" name="categoryName" required>
                    <a-input v-model:value="formState.categoryName" placeholder="请输入类别名称" />
                </a-form-item>

                <a-form-item label="操作系统版本" name="osVersion">
                    <a-input v-model:value="formState.osVersion" placeholder="请输入操作系统版本" />
                </a-form-item>

                <a-form-item label="网卡数量" name="networkCardCount" required>
                    <a-input-number 
                        v-model:value="formState.networkCardCount" 
                        :min="1" 
                        :max="100"
                        placeholder="请输入网卡数量"
                        style="width: 100%"
                    />
                </a-form-item>

                <a-form-item :wrapper-col="{ offset: 6, span: 16 }">
                    <a-space>
                        <a-button @click="handleCancel">取消</a-button>
                        <a-button type="primary" @click="handleSave">保存</a-button>
                    </a-space>
                </a-form-item>
            </a-form>
        </a-modal>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/3.4.21/vue.global.prod.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/dayjs/1.11.10/dayjs.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ant-design-vue/4.1.2/antd.min.js"></script>
    
    <script>
        const { createApp, ref, reactive } = Vue;
        const { message } = antd;

        const app = createApp({
            setup() {
                const visible = ref(false);
                const formRef = ref();
                
                const formState = reactive({
                    hostname: '',
                    ip: '',
                    appAssetName: undefined,
                    brand: '',
                    model: '',
                    opsPerson: [],
                    categoryName: '',
                    osVersion: '',
                    networkCardCount: 1
                });

                const showModal = () => {
                    visible.value = true;
                };

                const handleSave = async () => {
                    // 这里可以添加表单验证逻辑
                    if (!formState.hostname || !formState.ip) {
                        message.error('请填写必填字段');
                        return;
                    }
                    
                    console.log('保存数据:', formState);
                    message.success('保存成功！');
                    visible.value = false;
                    
                    // 重置表单
                    Object.keys(formState).forEach(key => {
                        if (key === 'opsPerson') {
                            formState[key] = [];
                        } else if (key === 'networkCardCount') {
                            formState[key] = 1;
                        } else if (key === 'appAssetName') {
                            formState[key] = undefined;
                        } else {
                            formState[key] = '';
                        }
                    });
                };

                const handleCancel = () => {
                    visible.value = false;
                };

                const filterOption = (input, option) => {
                    return option.children[0].children.toLowerCase().indexOf(input.toLowerCase()) >= 0;
                };

                return {
                    visible,
                    formRef,
                    formState,
                    showModal,
                    handleSave,
                    handleCancel,
                    filterOption
                };
            }
        });

        app.use(antd);
        app.mount('#app');
    </script>
</body>
</html>